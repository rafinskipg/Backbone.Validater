/*! Backbone Validater - MIT License - https://github.com/rafinskipg/Backbone.Validater */
(function(i,t){if(typeof define==="function"&&define.amd){define(["jQuery","_","Backbone"],t)}else{i.amdWeb=t(i.jQuery,i._,i.Backbone)}})(this,function(i,t,e){var n=e.View.extend({validations:{},hasContent:function(i){if(t.isBoolean(i)){return true}if(t.isArray(i)&&i.length>0){return true}if(!t.isArray(i)&&t.keys(i).length>0){var e=t.keys(i);for(var n=0;n<e.length;n++){if(this.hasContent(i[e[n]])){return true}}return false}if(t.isFinite(i)||!t.isEmpty(i)){return true}return false},checkRequiredFields:function(){var i=this.model.toJSON();var t=[];for(var e in this.model.requiredFields){var n=this.model.requiredFields[e];if(!this.hasContent(i[n])){t.push(n)}}return t.length>0?t:null},customValidations:function(){var i=this.getConditionsFulfilled();var t=[];if(i.length>0){var e=this;i.forEach(function(i){var n=i.fields.map(function(i){return e.model.get(i)});if(!e[i.validation].apply(e,n)){i.fields.forEach(function(e){t.push({field:e,validation:i.validation})})}})}return t},getConditionsFulfilled:function(){var i=this.extractConditionsFromBindings();var e=this;i=t.compact(i.map(function(i){var t=true;i.fields=i.fields.map(function(i){if(i.indexOf("!")!=0){if(!e.model.get(i)||!e.hasContent(e.model.get(i))){t=false}}else{i=i.replace("!","");if(e.model.get(i)&&e.hasContent(e.model.get(i))){t=false}}return i});if(t){return i}}));return i},extractConditionsFromBindings:function(){var i=[];for(var t in this.validations){var e={};var n=t.split("&");e.fields=n;e.validation=this.validations[t];i.push(e)}return i},validate:function(){var i=t.compact(Array.prototype.concat(this.checkRequiredFields(),this.customValidations()));return i.length>0?i:null}});n.VERSION="<% VERSION %>";e.validator=n;return n});